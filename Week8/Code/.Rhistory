"ph419",
"lh1019",
"ojs19",
"abs119",
"ys219",
"hw2419",
"yy5819",
"xz4419",
"wz2812",
"yz2919",
"ha819",
"db319",
"mlc19",
"rbk119",
"pl1619",
"xl15918",
"sl6719",
"imm19",
"ams119",
"sat19",
"yz12119"
)
choose_student <- function(class) {
print(sample(class,1))
}
choose_student_2 <- function(class,seedin = 1) {
set.seed(seedin)
print(sample(class,1))
}
choose_student_3 <- function(class,seedin=-1) {
if (seedin <= 0){
set.seed(floor(proc.time()[3]*1000))
}
else {
set.seed(seedin)
}
print(sample(class,1))
}
assign_student_number <- function(class=CMEE_2019,seedin=2019,min=0.002,max=0.007,sigfig=4,unique=TRUE) {
if (seedin <= 0){
set.seed(floor(proc.time()[3]*1000))
}
else {
set.seed(seedin)
}
speciation_values <- signif(runif(length(class))*(max-min)+min,sigfig)
if (unique){
while(length(unique(speciation_values)) < length(class)){
speciation_values <- signif(runif(length(class))*(max-min)+min,sigfig)
}
}
return(cbind(speciation_values,class))
}
print(assign_student_number())
# written by james rosindell james@rosindell.org Imperial college london released open source under an MIT license
# Assign random speciation rates to class
CMEE_2019 <- c(
"vlb19",
"jb1919",
"ead19",
"rte19",
"hg816",
"leg19",
"ph419",
"lh1019",
"ojs19",
"abs119",
"ys219",
"hw2419",
"yy5819",
"xz4419",
"wz2812",
"yz2919",
"ha819",
"db319",
"mlc19",
"rbk119",
"pl1619",
"xl15918",
"sl6719",
"imm19",
"ams119",
"sat19",
"yz12119"
)
choose_student <- function(class) {
print(sample(class,1))
}
choose_student_2 <- function(class,seedin = 1) {
set.seed(seedin)
print(sample(class,1))
}
choose_student_3 <- function(class,seedin=-1) {
if (seedin <= 0){
set.seed(floor(proc.time()[3]*1000))
}
else {
set.seed(seedin)
}
print(sample(class,1))
}
assign_student_number <- function(class=CMEE_2019,seedin=2019,min=0.002,max=0.007,sigfig=4,unique=TRUE) {
if (seedin <= 0){
set.seed(floor(proc.time()[3]*1000))
}
else {
set.seed(seedin)
}
speciation_values <- signif(runif(length(class))*(max-min)+min,sigfig)
if (unique){
while(length(unique(speciation_values)) < length(class)){
speciation_values <- signif(runif(length(class))*(max-min)+min,sigfig)
}
}
return(cbind(speciation_values,class))
}
print(assign_student_number())
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run <- function(speciation_rate, size, wall_time, interval_rich, interval_oct, burn_in_generations, output_file_name)  {
community<-init_community_min(size=size)
a<-proc.time()
b<-proc.time()-a
while (((b[3])/60)<wall_time){
neutral_generation_speciation(community=community,speciation_rate =speciation_rate )
b<-proc.time()-a
}
}
cluster_run <- function(speciation_rate, size, wall_time, interval_rich, interval_oct, burn_in_generations, output_file_name)  {
community<-init_community_min(size=size)
a<-proc.time()
b<-proc.time()-a
while (((b[3])/60)<wall_time){
neutral_generation_speciation(community=community,speciation_rate =speciation_rate )
b<-proc.time()-a
}
}
cluster_run()
c=(1)
c=c(1,2,3,4,5)
class(C)
class(c)
c=c[1,2,3,4,5]
c=[1,2,3,4,5]
c=vector(c(1,2,3,4,5))
c=vector(c(1,2,3,4,5),)
c
d<-c(1,2,3)
richness
richness<-matrix(nrow=burn_in_generations)
richness<-matrix(nrow=12)
richness[1,]<-c
richness
richness[,c]
richness[1,]<-c
richness[,1]<-c
richness[,1]<-d
richness
richness[1,]<-d
richness<-()
richness
richness<-list()
richness.append(c)
richness.append(d)
append(richness,d)
richness<-append(richness,d)
richness<-append(richness,c)
richness
append(richness,c
)
richness<-list()
richness
richnes[1]<-c
richness[1]<-c
richness[1]<-list(c)
richness
richness[2]<-list(d)
richness
richness<-vector()
richness[1]<-list(c)
richness[2]<-list(d)
ruchness
richness
class(richness)
#richness<-matrix(nrow=burn_in_generations)
#richness<-list()
richness<-vector()
class(richness)
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
output_file_name<-fish
output_file_name<-"fish""
)
}
""
output_file_name<-"fish"
filename<-paste0("../Results/",output_file_name,".csv")
filename
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 10, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
cluster_run(speciation_rate = 0.1, size=100, wall_time = 3, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
proctime()
proc.time()
proc.time()
proc.time()
proc.time()
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
help(save)
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
output_file_name="a"
filename<-paste0("../Results/",output_file_name,".Rdata")
filename
save(output_file_name,file=filename)
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
save(output_file_name,file=filename)
setwd("~/Documents/CMEECourseWork/Week8/Code")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
save(output_file_name,file=filename)
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda.Rdata")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda.Rdata")
c
View(oct)
View(oct)
View(oct)
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda.Rdata")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1.rda")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda.rda")
cluster_run(speciation_rate = 0.1, size=100, wall_time = 10, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 10, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda.rda")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda.rda")
community
richness
View(oct)
View(oct)
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
neutral_generation_speciation(init_community_max(4),speciation_rate = 0.002)
community<-neutral_generation_speciation(init_community_max(4),speciation_rate = 0.002)
species_richness(community)
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
View(oct)
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
community<-neutral_generation_speciation(init_community_max(4),speciation_rate = 0.002)
neutral_generation_speciation(init_community_max(4),speciation_rate = 0.002)
cluster_run(speciation_rate = 0.1, size=100, wall_time = 10, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 10, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1")
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda.rda")
View(oct)
View(oct)
cluster_run(speciation_rate = 0.1, size=100, wall_time = 10, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
setwd("~/Documents/CMEECourseWork/Week7/Code")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda.rda")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda.rda")
View(oct)
View(oct)
rm(list=ls())
source("rbk119_HPC_2019_main.R")
setwd("~/Documents/CMEECourseWork/Week8/Code")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_cluster.R')
#if iter<25
if (12<4){
print("smaller")
}else{
print("higher")}
#if iter<25
if (12>4){
print("smaller")
}else{
print("higher")}
iter=3
#if iter<25
if (iter%%4==0){
popsize<-500
}else if (iter%%4==1){
popsize<-1000
}else if (iter%%4==2){
popsize<-2500
}else if (iter%%4==3){
popsize<-5000
}
popsize
iter=7
#if iter<25
if (iter%%4==0){
popsize<-500
}else if (iter%%4==1){
popsize<-1000
}else if (iter%%4==2){
popsize<-2500
}else if (iter%%4==3){
popsize<-5000
}
popsize
iter=8
#if iter<25
if (iter%%4==0){
popsize<-500
}else if (iter%%4==1){
popsize<-1000
}else if (iter%%4==2){
popsize<-2500
}else if (iter%%4==3){
popsize<-5000
}
popsize
paste0("output",iter)
filename<-paste0("output",iter)
filename<-paste0("output_",iter)
filename
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_cluster.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_cluster.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_cluster.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_cluster.R')
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/output_8.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_cluster.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_cluster.R')
source("rbk119_HPC_2019_main.R")
#iter<-as.numeric(Sys.getenv("PBS_ARRAY_INDEX"))
iter<-1
#last thing- undo above
set.seed(iter)
iter=8
#if iter<25
if (iter%%4==0){
popsize<-500
}else if (iter%%4==1){
popsize<-1000
}else if (iter%%4==2){
popsize<-2500
}else if (iter%%4==3){
popsize<-5000
}
filename<-paste0("output_",iter)
#timeinhours<-60*12
timeinhours<-1
cluster_run(speciation_rate = personal_speciation_rate,size=popsize,wall_time=timeinhours,interval_rich = 1,interval_oct = popsize/10,burn_in_generations = 8*popsize,output_file_name = filename)
cluster_run(speciation_rate = personal_speciation_rate,size=popsize,wall_time=timeinhours,interval_rich = 1,interval_oct = popsize/10,burn_in_generations = 8*popsize,output_file_name = filename)
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/output_8.rda")
View(richness)
View(richness)
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_cluster.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_cluster.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_cluster.R')
View(richness)
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_cluster.R')
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/output_8.rda")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/output_8.rda")
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda
)
}
""
"
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda")
community
species_richness(community)
View(richness)
View(richness)
richness<-c()
class(rich])
class(richness
)
class(richness)
richness<-c()
type(richness)
class(richness
richness<-vector()
richness<-()
richness<-[]
richness<-[0]
richness<-[N]
richness<-(0)
class(richness)
c(richness,species_richness(community))
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
cluster_run(speciation_rate = 0.1, size=100, wall_time = 1, interval_rich = 1,interval_oct = 10,burn_in_generations = 200,output_file_name = "my_test_file_1")
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/my_test_file_1.rda")
community<-init_community_min(size=size)
size=1000
community<-init_community_min(size=size)
a<-proc.time()
b<-proc.time()-a
nruns=0
richrows=0
richness<-(0)
oct<-list()
while (((b[3])/60)<wall_time){
community=neutral_generation_speciation(community=community,speciation_rate =speciation_rate )
nruns=nruns+1
b<-proc.time()-a
richness<-matrix(nrow=burn_in_generations)
#richness<-list()
#richness<-c()
if (nruns<burn_in_generations){
if (nruns%%interval_rich==0){
#richrows=richrows+1
#richness[richrows]<-species_richness(community)
# richness[richrows]<-list(species_richness(community))
richness<-c(richness,species_richness(community))
}
}
#oct<-list()
octrows=0
if (nruns%%interval_oct==0){
octrows=octrows+1
#index<-length(oct) + 1
oct[octrows]<-list(octaves(species_abundance(community)))
}
# if (nruns%%interval_oct==0){
##octrows=octrows+1
#  index<-length(oct) + 1
# oct[index]<-list(octaves(species_abundance(community)))
#}
}
community=neutral_generation_speciation(community=community,speciation_rate =speciation_rate )
nruns=nruns+1
b<-proc.time()-a
richness<-matrix(nrow=burn_in_generations)
#richness<-list()
#richness<-c()
if (nruns<burn_in_generations){
if (nruns%%interval_rich==0){
#richrows=richrows+1
#richness[richrows]<-species_richness(community)
# richness[richrows]<-list(species_richness(community))
richness<-c(richness,species_richness(community))
}
}
#richrows=richrows+1
#richness[richrows]<-species_richness(community)
# richness[richrows]<-list(species_richness(community))
richness<-c(richness,species_richness(community))
species_richness(community)
richness
richness<-(0)
community=neutral_generation_speciation(community=community,speciation_rate =speciation_rate )
nruns=nruns+1
b<-proc.time()-a
richness<-matrix(nrow=burn_in_generations)
#richrows=richrows+1
#richness[richrows]<-species_richness(community)
# richness[richrows]<-list(species_richness(community))
richness<-c(richness,species_richness(community))
richness<-(0)
#richrows=richrows+1
#richness[richrows]<-species_richness(community)
# richness[richrows]<-list(species_richness(community))
richness<-c(richness,species_richness(community))
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_main.R')
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_cluster.R')
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/output_8.rda
)""
""
load("/home/ruth/Documents/CMEECourseWork/Week8/Results/output_8.rda")
source('~/Documents/CMEECourseWork/Week8/Code/rbk119_HPC_2019_cluster.R')
